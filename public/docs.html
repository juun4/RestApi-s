<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JunnAPIs â€¢ Docs</title>

  <link rel="icon" type="image/png" href="https://cdn.yupra.my.id/yp/rpvaywxy.jpg">
  <link rel="apple-touch-icon" href="https://cdn.yupra.my.id/yp/rpvaywxy.jpg">
  <meta name="theme-color" content="#0b1020"/>

  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --bg:#0b1020; --surface:#0e1430; --card:#111736; --muted:#9aa4c7; --text:#e6ecff;
      --line:#1b2247; --pill:#2a3471; --acc:#7aa2ff; --acc2:#4ad295;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Arial;background:var(--bg);color:var(--text)}
    a{text-decoration:none;color:inherit;word-break:break-all}
    .wrap{max-width:min(900px,100vw - 32px);margin:0 auto;padding:24px}

    header{display:flex;align-items:center;justify-content:space-between;gap:16px;flex-wrap:wrap;margin-bottom:20px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:34px;height:34px;border-radius:10px;object-fit:cover;border:1px solid #20306d}
    .brand h1{font-size:22px;margin:0}
    .tag{color:var(--muted);font-size:14px}
    .btn{display:inline-flex;align-items:center;gap:8px;background:linear-gradient(90deg,var(--acc),var(--acc2));
      color:#04102a;padding:8px 12px;border-radius:10px;font-weight:700}

    /* ðŸŽµ PLAYER */
    .player-box{
      background:var(--surface);
      border:1px solid var(--line);
      border-radius:16px;
      box-shadow:0 8px 28px rgba(0,0,0,.25);
      padding:14px 16px;
      margin-bottom:22px;
      display:flex;
      align-items:center;
      gap:14px;
      position:relative;
      overflow:hidden;
    }
    .player-box::before{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(90deg,var(--acc) 0%,var(--acc2) 100%);
      opacity:.15;
      filter:blur(60px);
      z-index:0;
    }
    .player-cover{
      width:64px;height:64px;border-radius:12px;object-fit:cover;border:1px solid #24336e;z-index:1;
    }
    .player-info{flex:1;overflow:hidden;z-index:1}
    .player-title{font-weight:800;margin:0 0 4px 0;font-size:16px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .player-artist{font-size:13px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    
    /* MODIFIKASI: Gunakan order untuk memastikan tombol next di kanan */
    .player-controls{
        display:flex;
        align-items:center;
        gap:8px;
        z-index:1;
        /* Tambahkan properti di sini jika perlu mengatur kontrol */
    }
    .player-controls button{
      width:38px;height:38px;border-radius:10px;
      border:1px solid #24336e;background:#0f1736;color:#cfe1ff;
      display:flex;align-items:center;justify-content:center;
      cursor:pointer;transition:all .25s ease;
    }
    .player-controls button#pPrev { order: 1; } /* Tetap di kiri */
    .player-controls button#pPlay { order: 2; } /* Tetap di tengah */
    .player-controls button#pNext { order: 3; } /* Geser ke kanan */

    .player-controls button:hover{background:linear-gradient(90deg,var(--acc),var(--acc2));color:#051028;border:none}
    .player-controls svg{width:18px;height:18px;fill:currentColor}
    .player-controls .playing{background:linear-gradient(90deg,var(--acc),var(--acc2));color:#051028;border:none}
    .player-progress{display:flex;align-items:center;gap:6px;margin-top:6px;z-index:1}
    .player-progress .bar{flex:1;height:6px;border-radius:10px;background:#1c2652;overflow:hidden;position:relative;cursor:pointer}
    .player-progress .fill{
      height:100%;
      background:linear-gradient(90deg,var(--acc),var(--acc2));
      width:0%;
      transition:width 0.25s linear;
      box-shadow:0 0 8px var(--acc2);
    }
    .player-progress span{font-size:12px;color:var(--muted);min-width:32px;text-align:center}

    .tabs{display:flex;gap:8px;overflow-x:auto;padding-bottom:10px;border-bottom:1px solid var(--line);scrollbar-width:none;margin-bottom:18px}
    .tabs::-webkit-scrollbar{display:none}
    .tab{padding:8px 14px;border-radius:10px;background:#141a3b;color:var(--muted);font-weight:600;cursor:pointer;flex-shrink:0;white-space:nowrap}
    .tab.active{background:linear-gradient(90deg,var(--acc),var(--acc2));color:#04102a}
    /* badge jumlah */
    .tab .count{
      margin-left:8px;padding:2px 8px;border-radius:999px;font-size:12px;font-weight:800;
      background:#1a2250;border:1px solid #2a3471;color:#bcd0ff;
    }

    .section{background:var(--surface);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.18)}
    .grid{display:grid;gap:16px;grid-template-columns:1fr;}
    .item{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px;display:flex;flex-direction:column;gap:10px}
    .title{font-weight:700;margin:0}
    .desc{color:var(--muted);font-size:14px;margin:0}

    .meta{display:flex;flex-direction:column;gap:6px}
    .pill{display:flex;align-items:flex-start;gap:6px;padding:6px 8px;border:1px solid var(--pill);
      border-radius:999px;color:#c6d2ff;font-size:12px;background:rgba(255,255,255,0.02);word-break:break-word}
    .pill b{color:#cfe1ff;white-space:nowrap;margin-right:4px}
    .pill .example-url{flex:1;white-space:normal;word-break:break-word;overflow-wrap:anywhere;line-height:1.5}

    .actions{display:flex;gap:8px;flex-wrap:wrap}
    .open{display:inline-flex;align-items:center;justify-content:center;background:linear-gradient(90deg,var(--acc),var(--acc2));
      color:#04102a;padding:9px 12px;border-radius:10px;font-weight:800;margin-top:auto;width:max-content}
    .codebtn{display:inline-flex;align-items:center;justify-content:center;background:#141a3b;border:1px solid var(--line);
      color:#cfe1ff;padding:9px 12px;border-radius:10px;font-weight:800;margin-top:auto}

    footer{margin-top:28px;color:var(--muted);font-size:13px;text-align:center}
    .social{display:flex;gap:10px;justify-content:center;margin-top:8px}
    .social a{display:inline-flex;align-items:center;gap:8px;background:#121a3a;border:1px solid #23306a;color:#cfe1ff;
      padding:8px 12px;border-radius:10px;font-weight:700}

    /* ===== Modal Runner ===== */
    .backdrop{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px;z-index:50}
    .backdrop.show{display:flex}
    .modal{width:min(980px,100%);max-height:92vh;background:#0f1736;border:1px solid var(--line);border-radius:16px;box-shadow:0 30px 80px rgba(0,0,0,.5);display:flex;flex-direction:column}
    .modal-hd{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:14px 16px;border-bottom:1px solid var(--line)}
    .modal-tt{font-weight:800}
    .x{border:1px solid var(--line);background:#101a3c;color:#cfe1ff;border-radius:10px;padding:8px 10px;cursor:pointer}
    .modal-bd{padding:14px 16px;overflow:auto}

    .kv{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(180px,1fr))}
    .kv .field{display:flex;flex-direction:column;gap:6px}
    .kv input{padding:10px 12px;border-radius:10px;border:1px solid var(--line);background:#0e1836;color:#cfe1ff}

    .rtabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .rtab{padding:8px 10px;border-radius:10px;background:#101c44;border:1px solid #213072;color:#cfe1ff;font-weight:800;cursor:pointer}
    .rtab.active{background:linear-gradient(90deg,var(--acc),var(--acc2));color:#051028;border-color:transparent}

    .codebox{position:relative;background:#0b1432;border:1px solid #1c2656;border-radius:12px;padding:12px}
    .code-scroll{max-height:320px;overflow:auto}
    pre{margin:0;white-space:pre-wrap;word-break:break-word}
    .copy{position:absolute;top:8px;right:8px;font-size:12px;background:#0e1736;border:1px solid #213072;color:#cfe1ff;border-radius:8px;padding:6px 8px;cursor:pointer}

    .run{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .btn-run{padding:12px 14px;border-radius:12px;background:linear-gradient(90deg,var(--acc),var(--acc2));color:#051028;font-weight:800;border:none;cursor:pointer}
    .btn-reset{padding:12px 14px;border-radius:12px;background:#10193c;border:1px solid #1b2350;color:#cfe1ff;font-weight:800;cursor:pointer}
    .status{display:inline-flex;gap:6px;align-items:center;padding:6px 10px;border-radius:999px;background:#0e1838;border:1px solid #25356f;color:#9fb2ff;font-weight:800}

    /* response viewer (JSON pretty only) */
    .resp{background:#0b1432;border:1px solid #1c2656;border-radius:12px;padding:12px;overflow:auto;min-height:120px;max-height:420px}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;color:#cfe1ff}

    .ico{width:16px;height:16px;display:inline-block}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img class="logo" src="https://cdn.yupra.my.id/yp/rpvaywxy.jpg" alt="Logo" />
        <div>
          <h1 id="siteName">JunnAPIs</h1>
          <div class="tag">Free & Simple REST Endpoints â€” <b>Docs</b></div>
        </div>
      </div>
      <div style="display:flex;gap:10px;flex-wrap:wrap">
        <a id="repoLink" class="btn" target="_blank">GitHub</a>
        <a class="btn" href="/">Home</a>
      </div>
    </header>

    <div id="playerBox" class="player-box" style="display:none">
      <img id="pCover" class="player-cover" src="" alt="cover">
      <div class="player-info">
        <div id="pTitle" class="player-title">Loading...</div>
        <div id="pArtist" class="player-artist"></div>
        <div class="player-progress">
          <span id="pCurrent">0:00</span>
          <div id="pBar" class="bar"><div id="pBarFill" class="fill"></div></div>
          <span id="pDuration">0:00</span>
        </div>
      </div>
      <div class="player-controls">
        <button id="pPrev" title="Previous"><svg viewBox="0 0 24 24"><path d="M6 4v16l9-8zM19 4v16h-2V4z"/></svg></button>
        <button id="pPlay" title="Play/Pause">
          <svg id="iconPlay" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
          <svg id="iconPause" style="display:none" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
        </button>
        <button id="pNext" title="Next"><svg viewBox="0 0 24 24"><path d="M18 20V4l-9 8zM5 4v16h2V4z"/></svg></button>
      </div>
    </div>

    <div id="tabs" class="tabs"></div>
    <div id="content"></div>

    <footer>
      <div>Made by <b id="creator">juun4</b></div>
      <div class="social">
        <a id="socGH" target="_blank" rel="noreferrer">
          <svg class="ico" viewBox="0 0 24 24" fill="#cfe1ff"><path d="M12 .5a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.3-1.8-1.3-1.8-1-.7.1-.7.1-.7 1.1.1 1.7 1.2 1.7 1.2 1 .1.7 1.7 2.9 1.2.1-.8.4-1.3.8-1.6-2.6-.3-5.4-1.3-5.4-5.9 0-1.3.5-2.3 1.2-3.2 0-.3-.5-1.5.1-3.2 0 0 1-.3 3.3 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.7.2 2.9.1 3.2.8.9 1.2 2 1.2 3.2 0 4.6-2.8 5.6-5.5 5.9.4.4.9 1.1.9 2.2v3.3c0 .3.2.7.8.6A12 12 0 0 0 12 .5z"/></svg>
          GitHub
        </a>
        <a id="socWA" target="_blank" rel="noreferrer">
          <svg class="ico" viewBox="0 0 24 24" fill="#4ad295"><path d="M20.5 3.5A11 11 0 0 0 3.1 18.6L2 22l3.5-1a11 11 0 0 0 15-17.6zM12 20a8 8 0 0 1-4.1-1.1l-.3-.2-2.4.7.7-2.3-.2-.3A8 8 0 1 1 12 20zm4.4-5.7c-.2-.1-1.2-.6-1.4-.7-.2-.1-.4-.1-.6.1l-.4.5c-.1.1-.3.2-.5.1-1-.5-1.9-1.3-2.5-2.3-.1-.2 0-.3.1-.5l.3-.3c.1-.2.2-.4.1-.6l-.7-1.5c-.2-.3-.4-.3-.6-.3h-.5c-.2 0-.6.1-.9.4-.9.9-.9 2.2 0 3.5 1.1 1.6 2.8 3 4.6 3.7.5.2 1 .3 1.3.2.4-.1 1.2-.5 1.4-1 .2-.4.2-.8.1-1z"/></svg>
          WhatsApp
        </a>
        <a id="socYT" target="_blank" rel="noreferrer">
          <svg class="ico" viewBox="0 0 24 24" fill="#ff5959"><path d="M23 7.2s-.2-1.6-.8-2.3c-.8-.8-1.7-.8-2.1-.9C17.3 3.7 12 3.7 12 3.7h0s-5.3 0-8 .3c-.4.1-1.3.1-2.1.9C1.3 5.6 1 7.2 1 7.2S.7 9.1.7 11v2c0 1.9.3 3.8.3 3.8s.2 1.6.8 2.3c.8.8 1.8.8 2.3.9 1.7.2 7.9.3 7.9.3s5.3 0 8-.3c.4-.1 1.3-.1 2.1-.9.6-.7.8-2.3.8-2.3s.3-1.9.3-3.8v-2c0-1.9-.3-3.8-.3-3.8zM9.8 15.3V8.7l6 3.3-6 3.3z"/></svg>
          YouTube
        </a>
      </div>
    </footer>
  </div>

  <div id="runner" class="backdrop" aria-hidden="true">
    <div class="modal">
      <div class="modal-hd">
        <div class="modal-tt" id="rTitle">Example Code</div>
        <button class="x" id="rClose">Close</button>
      </div>
      <div class="modal-bd">
        <div class="kv" style="margin-bottom:10px">
          <div class="field">
            <label class="tag">Global API Key (tersimpan lokal)</label>
            <input id="rGlobalKey" placeholder="Masukkan API key (opsional)"/>
          </div>
        </div>

        <div class="tag" style="display:block;margin:6px 0 8px">Parameter</div>
        <div id="rParams" class="kv"></div>

        <div class="rtabs" id="rTabs">
          <button class="rtab active" data-mode="cURL">cURL</button>
          <button class="rtab" data-mode="CJS">Javascript (CJS)</button>
          <button class="rtab" data-mode="ESM">Javascript (ESM)</button>
        </div>

        <div class="codebox">
          <button class="copy" id="rCopy">Copy</button>
          <div class="code-scroll"><pre id="rCode" class="mono"></pre></div>
        </div>

        <div class="run">
          <button id="rExec" class="btn-run">Execute</button>
          <button id="rReset" class="btn-reset">Reset</button>
          <span id="rStatus" class="status">ready</span>
        </div>

        <pre id="rResp" class="resp mono" style="margin-top:10px">{ "status":"waiting", "message":"No response yet" }</pre>
      </div>
    </div>
  </div>

  <script>
  (async ()=>{
    const res = await fetch('/src/web-set.json',{cache:'no-store'});
    const cfg = await res.json();
    const music = cfg.musicSettings || {};
    const playlist = music.playlist || [];
    if(!playlist.length) return;

    const box = document.getElementById('playerBox');
    const pCover = document.getElementById('pCover');
    const pTitle = document.getElementById('pTitle');
    const pArtist = document.getElementById('pArtist');
    const pBar = document.getElementById('pBar');
    const pBarFill = document.getElementById('pBarFill');
    const pCurrent = document.getElementById('pCurrent');
    const pDuration = document.getElementById('pDuration');
    const btnPrev = document.getElementById('pPrev');
    const btnPlay = document.getElementById('pPlay');
    const btnNext = document.getElementById('pNext');
    const iconPlay = document.getElementById('iconPlay');
    const iconPause = document.getElementById('iconPause');
    const audio = new Audio();
    audio.volume = music.volume ?? 0.85;

    let index = 0;
    const fmt = s => isNaN(s) ? '0:00' : `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`;

    function load(i){
      const s = playlist[i];
      pCover.src = s.image || 'https://cdn.yupra.my.id/yp/rpvaywxy.jpg';
      pTitle.textContent = s.title || 'Unknown';
      pArtist.textContent = s.artist || '';
      audio.src = s.url;
      pBarFill.style.width='0%';
      pCurrent.textContent='0:00';
      pDuration.textContent='0:00';
      iconPlay.style.display='block';
      iconPause.style.display='none';
      btnPlay.classList.remove('playing');
    }

    load(index);
    box.style.display='flex';

    btnPlay.onclick = ()=>{
      if(audio.paused){
        audio.play();
        iconPlay.style.display='none';
        iconPause.style.display='block';
        btnPlay.classList.add('playing');
      } else {
        audio.pause();
        iconPlay.style.display='block';
        iconPause.style.display='none';
        btnPlay.classList.remove('playing');
      }
    };
    btnNext.onclick=()=>{index=(index+1)%playlist.length;load(index);audio.play();iconPlay.style.display='none';iconPause.style.display='block';btnPlay.classList.add('playing');};
    btnPrev.onclick=()=>{index=(index-1+playlist.length)%playlist.length;load(index);audio.play();iconPlay.style.display='none';iconPause.style.display='block';btnPlay.classList.add('playing');};

    audio.ontimeupdate=()=>{
      if(audio.duration){
        pBarFill.style.width=`${(audio.currentTime/audio.duration)*100}%`;
        pCurrent.textContent=fmt(audio.currentTime);
        pDuration.textContent=fmt(audio.duration);
      }
    };
    pBar.onclick=(e)=>{
      const x=e.offsetX/pBar.offsetWidth;
      audio.currentTime=x*audio.duration;
    };
    audio.onended=()=>btnNext.click();
  })();
  </script>

  <script>
  // ---------- helpers ----------
  const $ = (q)=>document.querySelector(q);
  function parseParamsFromPath(path){
    const q = (path.split('?')[1]||'').trim();
    if(!q) return [];
    return q.split('&').filter(Boolean).map(kv=>{
      const [k,v] = kv.split('=');
      return {key:k, value: decodeURIComponent(v||'')};
    });
  }
  function pickMainParam(params){
    const keys = params.map(p=>p.key.toLowerCase()).filter(k=>k!=='apikey');
    const prio = ['url','text','query','prompt'];
    for(const k of prio){ if(keys.includes(k)) return k; }
    return keys[0] || 'text';
  }
  function buildURL(basePath, fields){
    const origin = location.origin;
    const root = basePath.split('?')[0];
    const qp = new URLSearchParams();
    fields.forEach(f=> qp.set(f.dataset.param, f.value));
    return `${origin}${root}?${qp.toString()}`;
  }
  function jsFunctionSample(basePath, paramName, requiresKey){
    const origin = location.origin;
    const root = basePath.split('?')[0];
    const keyLine = requiresKey ? `  const apiKey = localStorage.getItem('JUNN_DOCS_KEY') || 'free';\n` : '';
    const keyQS   = requiresKey ? `&apikey=\${apiKey}` : '';
    return `async function fetchApi(${paramName}){\n${keyLine}  const url = \`${origin}${root}?${paramName}=\${encodeURIComponent(${paramName})}${keyQS}\`;\n  const res = await fetch(url, { headers: { 'Accept':'application/json' } });\n  const json = await res.json();\n  return json;\n}\n\n// contoh pemanggilan\nfetchApi("${paramName==='url' ? 'https://example.com' : 'your text here'}")`;
  }
  function samples(basePath, fields, mainParam){
    const requiresKey = fields.some(f=>f.key.toLowerCase()==='apikey');
    const origin = location.origin;
    const root = basePath.split('?')[0];

    const current = {};
    fields.forEach(f=> current[f.key] = f.value || '');
    const curlQS = Object.entries(current).map(([k,v])=>`${k}=${encodeURIComponent(v)}`).join('&');
    const curlURL = `${origin}${root}?${curlQS}`;

    return {
      cURL: `curl -s "${curlURL}" \\\n  -H "Accept: application/json"`,
      CJS: jsFunctionSample(basePath, mainParam, requiresKey),
      ESM: jsFunctionSample(basePath, mainParam, requiresKey),
    };
  }

  // ---------- state ----------
  let CFG=null;
  let CURRENT=null;
  const runner = $('#runner'), rTitle = $('#rTitle'), rParams = $('#rParams');
  const rTabs = $('#rTabs'), rCode = $('#rCode'), rCopy = $('#rCopy');
  const rExec = $('#rExec'), rReset = $('#rReset'), rStatus = $('#rStatus'), rResp = $('#rResp');
  const rGlobalKey = $('#rGlobalKey');
  let R_MODE='cURL', R_MAIN_PARAM='text';

  rGlobalKey.value = localStorage.getItem('JUNN_DOCS_KEY') || '';
  rGlobalKey.addEventListener('input', ()=>localStorage.setItem('JUNN_DOCS_KEY', rGlobalKey.value.trim()));
  $('#rClose').addEventListener('click', ()=>runner.classList.remove('show'));

  rTabs.addEventListener('click', (e)=>{
    const b = e.target.closest('.rtab'); if(!b) return;
    rTabs.querySelectorAll('.rtab').forEach(t=>t.classList.remove('active'));
    b.classList.add('active'); R_MODE=b.dataset.mode;
    if(CURRENT) updateRunnerCode();
  });

  rCopy.addEventListener('click', async ()=>{
    await navigator.clipboard.writeText(rCode.textContent||''); rCopy.textContent='Copied!'; setTimeout(()=>rCopy.textContent='Copy',800);
  });

  rExec.addEventListener('click', async ()=>{
    if(!CURRENT) return;
    const fields = [...rParams.querySelectorAll('[data-param]')];
    const url = buildURL(CURRENT.item.path, fields);
    rStatus.textContent='fetchingâ€¦'; rResp.textContent='{ }';
    try{
      const res = await fetch(url, { headers: { 'Accept':'application/json' } });
      const text = await res.text();
      rStatus.textContent = `${res.status} ${res.statusText}`;
      try{ rResp.textContent = JSON.stringify(JSON.parse(text), null, 2); }
      catch{ rResp.textContent = text; }
    }catch(err){
      rStatus.textContent='error'; rResp.textContent=String(err);
    }
  });

  rReset.addEventListener('click', ()=>{
    if(!CURRENT) return;
    fillParamFields(CURRENT.item);
    updateRunnerCode();
    rStatus.textContent='ready';
    rResp.textContent='{ "status":"waiting", "message":"No response yet" }';
  });

  function fillParamFields(item){
    const params = parseParamsFromPath(item.path||'');
    R_MAIN_PARAM = pickMainParam(params);
    params.forEach(p=>{
      if(p.key.toLowerCase()==='apikey' && !p.value) p.value = rGlobalKey.value || 'free';
      if(!p.value && item.example && p.key.toLowerCase()===R_MAIN_PARAM) p.value = item.example;
    });
    rParams.innerHTML = params.map(p=>`
      <div class="field">
        <label class="tag">${p.key}</label>
        <input data-param="${p.key}" value="${(p.value||'').replace(/"/g,'&quot;')}" placeholder="${p.key} value"/>
      </div>`).join('') || `<div class="tag">Endpoint ini tidak memiliki parameter query.</div>`;
    
    // tambahkan listener untuk update code saat input berubah
    rParams.querySelectorAll('input').forEach(input => input.addEventListener('input', updateRunnerCode));
  }

  function updateRunnerCode(){
    const fieldEls = [...rParams.querySelectorAll('[data-param]')];
    const fields = fieldEls.map(el=>({key:el.dataset.param, value:el.value}));
    const s = samples(CURRENT.item.path, fields, R_MAIN_PARAM);
    rCode.textContent = s[R_MODE];
  }

  function openRunner(cat,item){
    CURRENT = {cat,item};
    rTitle.textContent = `${item.title || 'Endpoint'} â€” ${cat.title || ''}`;
    fillParamFields(item);
    updateRunnerCode();
    rStatus.textContent='ready';
    rResp.textContent='{ "status":"waiting", "message":"No response yet" }';
    runner.classList.add('show');
  }

  // ---------- render docs ----------
  async function main(){
    const res = await fetch('/src/web-set.json',{cache:'no-store'});
    const cfg = await res.json();
    CFG = cfg;

    // branding & socials
    const site = cfg?.branding?.siteName ?? 'JunnAPIs';
    document.getElementById('siteName').textContent = site;
    document.getElementById('creator').textContent  = cfg?.apiSettings?.creator ?? 'unknown';
    document.getElementById('repoLink').href = cfg?.branding?.repo || '#';
    document.getElementById('socGH').href = cfg?.branding?.repo || '#';
    document.getElementById('socWA').href = cfg?.branding?.whatsapp || 'https://wa.me/628672763507';
    document.getElementById('socYT').href = cfg?.branding?.youtube || 'https://youtube.com/@JunaaInHeree';

    const cats = cfg.categories || [];
    const tabs = document.getElementById('tabs');
    const content = document.getElementById('content');

    /* ======= NEW: All + jumlah per kategori ======= */
    const allItems = cats.flatMap(c => (c.items||[]).map(it => ({...it, _cat:c.title})));
    function makeTab(label, count, payload, active=false){
      const el = document.createElement('div');
      el.className = 'tab' + (active ? ' active' : '');
      el.innerHTML = `${label} <span class="count">${count}</span>`;
      el.addEventListener('click', ()=>{
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        el.classList.add('active');
        render(payload);
      });
      tabs.appendChild(el);
    }
    // Tab All
    makeTab('All', allItems.length, allItems, true);
    // Tabs kategori
    cats.forEach(cat=> makeTab(cat.title || 'Category', (cat.items||[]).length, cat));

    // renderer: bisa terima array items (All) atau object kategori
    function render(source){
      const items = Array.isArray(source) ? source : (source.items || []);
      content.innerHTML='';
      const section=document.createElement('section'); section.className='section';
      const grid=document.createElement('div'); grid.className='grid';

      items.forEach(it=>{
        const card=document.createElement('div'); card.className='item';
        const t=document.createElement('div'); t.className='title'; t.textContent=it.title||'Untitled';
        const d=document.createElement('p'); d.className='desc'; d.textContent=it.desc||'';
        card.appendChild(t); card.appendChild(d);

        const meta=document.createElement('div'); meta.className='meta';
        const key=document.createElement('div'); key.className='pill';
        key.textContent=(it.requireKey ?? cfg.apiSettings?.defaultRequireKey) ? 'Requires API Key' : 'No Key';
        meta.appendChild(key);

        if(it.example){
          const ex=document.createElement('div'); ex.className='pill';
          const label=document.createElement('b'); label.textContent='Example:';
          const url=document.createElement('span'); url.className='example-url'; url.textContent=it.example;
          ex.appendChild(label); ex.appendChild(url); meta.appendChild(ex);
        }
        card.appendChild(meta);

        const actions = document.createElement('div'); actions.className='actions';
        if(it.path){
          const go=document.createElement('a'); go.className='open'; go.textContent='Open Endpoint';
          go.href = location.origin + it.path; go.target = '_blank';
          actions.appendChild(go);

          const codeBtn=document.createElement('button'); codeBtn.type='button'; codeBtn.className='codebtn'; codeBtn.textContent='Example Code';
          codeBtn.addEventListener('click', ()=>openRunner({ title: it._cat || 'All' }, it));
          actions.appendChild(codeBtn);
        }
        card.appendChild(actions);

        grid.appendChild(card);
      });

      section.appendChild(grid); content.appendChild(section);
    }

    // render awal: All
    render(allItems);
    /* ============================================== */
  }
  main().catch(e=>{
    document.getElementById('content').innerHTML=`<div class='section'><div class='item'>Error: ${e.message}</div></div>`;
  });
  </script>
</body>
</html>
